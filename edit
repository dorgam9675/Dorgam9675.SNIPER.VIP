import streamlit as st
import yfinance as yf
import pandas as pd
import ta
import numpy as np

st.set_page_config(page_title="Dorgam9675.SNIPER.VIP", layout="centered")

st.title("ğŸ” Ù†Ø¸Ø§Ù… Dorgam9675.SNIPER.VIP")
st.write("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…")

symbol = st.selectbox("Ø§Ø®ØªØ± Ø²ÙˆØ¬ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø£Ùˆ Ø§Ù„Ø°Ù‡Ø¨", ["XAUUSD", "EURUSD", "GBPUSD", "USDJPY"])
interval = st.selectbox("Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø²Ù…Ù†ÙŠ", ["1h", "4h", "1d"])
duration = st.selectbox("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©", ["1mo", "3mo", "6mo", "1y"])

if st.button("Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„"):
    data = yf.download(symbol, interval=interval, period=duration)
    
    if data.empty:
        st.error("âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª")
    else:
        data['EMA200'] = data['Close'].ewm(span=200).mean()
        data['RSI'] = ta.momentum.RSIIndicator(data['Close']).rsi()
        data['Ø¥Ø´Ø§Ø±Ø©'] = np.where((data['Close'] > data['EMA200']) & (data['RSI'] < 30), 'ğŸ“ˆ Ø´Ø±Ø§Ø¡',
                           np.where((data['Close'] < data['EMA200']) & (data['RSI'] > 70), 'ğŸ“‰ Ø¨ÙŠØ¹', 'ğŸ” Ø§Ù†ØªØ¸Ø§Ø±'))

        st.dataframe(data[['Close', 'EMA200', 'RSI', 'Ø¥Ø´Ø§Ø±Ø©']].tail(20))
        st.success("âœ… Ø§Ù„ØªØ­Ù„ÙŠÙ„ ØªÙ… Ø¨Ù†Ø¬Ø§Ø­")
